<!DOCTYPE html>
<!-- 타임리프 사용 -->
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>내 약통</title>

    <!-- bootstrap, custom css 링크 -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/home.css" rel="stylesheet">
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"
          type="text/css"/>

</head>
<body>

<div th:replace="navbar/navBar :: navBar"/>


<!--메인 페이지-->
<p class="mainText" th:text="${member} + '님의 약통'"></p>
<p class="mainSubText">자주 먹는 약 정보, 내 약통에 쏙</p>
<br>

<div class="myMediCaseDiv">
    <button onclick="plusbtn"
            style="margin-top: 80px; border: 0px;background: #ffffff;width: 100px;height: 100px;overflow: auto;background: none">
        <div>
            <div data-bs-toggle="modal" data-bs-target="#plusbtn">
                <div class="d-flex align-items-center justify-content-center h-100 w-100">
                </div>
                <img class="img-fluid" src="/image/plusbutton2.jpg" alt="..."/>
            </div>
        </div>
    </button>
    <section class="portfolio-item page-section portfolio" id="portfolio">
        <div class="row justify-content-center" style="padding-top: 225px; width: 900px;margin: 0 auto">
            <!-- Portfolio Item 1-->
            <div class="col-md-6 col-lg-4 " style="height: 350px; margin-bottom: 20px;" th:each="mediBox: ${mediBoxs}">
                <div class="portfolio-item mx-auto mediBox"
                     style="border-radius: 70%" th:id="${mediBox.getId()}">
                    <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                        <div class="portfolio-item-caption-content text-center text-white">
                            <i class="fa fa-search fa-3x"></i>
                        </div>
                    </div>
                    <img id="mediImg" style="border-radius: 70%;"
                         th:style="'background:' + ${mediBox.getColor()}+ ';border-radius:70%'" class="img-fluid"
                         src="/image/mediCase/tes.png" alt="..."/>
                </div>
                <hr>
                <h2 th:text="${mediBox.getName()}"></h2>
            </div>
            <div class="pagination justify-content-center">
                <a role="button" class="btn btn-lg" th:if="${hasPrev == true}" th:href="@{/medi/medibox(page=${previous})}" ><i class="fa-solid fa-square-caret-left fa-2x"></i></a>
                <a role="button" class="btn btn-lg" th:if="${hasPrev == false}" href="" ><i class="fa-regular fa-square-caret-left fa-2x disabled"></i></a>
                <a role="button" class="btn btn-lg" th:if="${hasNext == false}" href=""><i class="fa-regular fa-square-caret-right fa-2x disabled"></i></a>
                <a role="button" class="btn btn-lg" th:if="${hasNext == true}" th:href="@{/medi/medibox(page=${next})}"><i class="fa-solid fa-square-caret-right fa-2x"></i></a>
            </div>

        </div>
    </section>
</div>


<!-- 약통 조회 -->
<div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" aria-labelledby="portfolioModal1"
     aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <!-- 약통 이름 -->
                            <h2 class="portfolio-modal-title text-dark text-uppercase mb-0" id="mediName" style="font-weight: 800;">약통 이름</h2>
                            <br><br>

                            <!-- 약통 이미지 -->
                            <img id="mediImg2" style="background: #ffa8a8;border-radius: 70%;overflow: hidden"
                                 class="img-fluid" src="/image/mediCase/tes.png" alt="..."/>
                            <hr>

                            <!-- 약통 텍스트-->
                            <h3 style="display:inline">메모 : </h3>
                            <h3 id="mediMemo" style="display:inline">약통 메모<br></h3>
                            <br><br>
                            <h4>약1 : 감기약<br>약2 : 두통약</h4>
                            <br>

                            <h4 style="display:inline">남은 약 개수 : </h4> <h4 id="mediCounts" style="display:inline">몇</h4>
                            <h4 style="display:inline">개</h4>
                            <br><br>

                            <button id="btn-time" class="btn btn-primary" data-bs-toggle="modal"
                                    data-bs-target="#timebtn">
                                <i class="far fa-clock fa-fw"></i>
                                일정
                            </button>
                            <button id="btn-update" class="btn btn-primary" data-bs-toggle="modal"
                                    data-bs-target="#editbtn">
                                <i class="fa-solid fa-pen"></i>
                                수정
                            </button>
                            <button id="btn-delete" class="btn btn-danger">
                                <i class="fas fa-xmark fa-fw"></i>
                                삭제
                            </button>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- 약통 추가 -->
<div class="modal fade" id="plusbtn" tabindex="-1" aria-labelledby="plusbtn"
     aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <!-- Portfolio Modal - Title-->
                            <h1 class="text-dark text-uppercase mb-0" style="font-weight: 600;">약통 추가하기</h1>
                            <!-- Icon Divider-->
                            <div class="divider-custom">
                                <div class="divider-custom-line"></div>
                                <div class="divider-custom-line"></div>
                            </div>
                            <br>
                            <div>
                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label for="medicase" class="col-form-label" style="padding-right: 3em">약통
                                            이름</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" id="medicase" class="form-control" placeholder="약통 이름">
                                    </div>
                                </div>
                                <hr>

                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label for="memo" class="col-form-label">메모&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" id="memo" class="form-control" placeholder="메모">
                                    </div>
                                </div>
                                <hr>

                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label for="caseCol" class="col-form-label" style="padding-right: 1em">약통
                                            색상&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="color" id="caseCol" class="form-control" placeholder="색상"
                                               value="#ffa8a8" style="width: 150px;height: 70px">
                                    </div>
                                    <div class="col-auto">
                                    </div>
                                </div>
                                <hr>
                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label class="col-form-label" style="padding-right: 1em">약 추가
                                            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                                    </div>
                                    <div class="col-md-9">
                                        <table class="table border-secondary">
                                            <tbody id="mediTbody">
                                            <tr>
                                                <td><input type="text" id="medi0" class="form-control"
                                                           placeholder="무슨약">
                                                </td>
                                            </tr>

                                            </tbody>

                                        </table>
                                        <button onclick="addRow()" style="background: none;border: none">
                                            <img class="img-fluid" style="width: 30px;height: 30px"
                                                 src="/image/plusbutton.png" alt="..."/>
                                        </button>

                                        <button onclick="delRow()" style="background: none;border: none">
                                            <img class="img-fluid" style="width: 30px;height: 30px"
                                                 src="/image/minus.png" alt="..."/>
                                        </button>

                                    </div>
                                    <div class="col-auto">

                                    </div>

                                </div>
                                <hr>

                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label class="col-form-label" style="padding-right: 1em">여분의
                                            약&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" aria-label="Default select example" id="dayselect"
                                                onchange="Change(); Count();">
                                            <option value="0" selected>선택 없음</option>
                                            <option value="1">갯수</option>
                                            <option value="2">일</option>
                                            <option value="3">주</option>
                                            <option value="4">달</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <div>
                                            <div class='ctrl' id="d1" style="visibility: hidden">
                                                <div class='ctrl__button ctrl__button--decrement'>&ndash;</div>
                                                <div class='ctrl__counter'>
                                                    <input class='ctrl__counter-input' maxlength='10' type='text'
                                                           value='0' id="mediCount">
                                                    <div class='ctrl__counter-num'>0</div>
                                                </div>
                                                <div class='ctrl__button ctrl__button--increment'>+</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" aria-label="Default select example" id="d2"
                                                style="visibility: hidden" onchange="Count()">
                                            <option value="0" selected>하루 몇번</option>
                                            <option value="1">1번</option>
                                            <option value="2">2번</option>
                                            <option value="3">3번</option>
                                        </select>
                                    </div>
                                    <div class="col-auto">
                                    </div>
                                </div>
                            </div>
                            <br>
                            <h4 class="text-dark mb-0" id="count" style="display: inline" th:text="0"></h4><h4
                                style="display: inline">개</h4>
                            <br><br><br><br>
                            <button id="btn-add" class="btn btn-primary" data-bs-dismiss="modal" style="width: 90px">
                                추가
                            </button>
                            <button class="btn btn-primary" data-bs-dismiss="modal" style="width: 90px">
                                취소
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 약통 수정 -->
<div class="modal fade" id="editbtn" tabindex="-1" aria-labelledby="editbtn"
     aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <!-- 타이틀 -->
                            <h1 class="text-dark text-uppercase mb-0" style="font-weight: 600;">약통 수정하기</h1>
                            <br>
                            <div>
                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label for="editMediName" class="col-form-label" style="padding-right: 3em">약통
                                            이름</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" id="editMediName" class="form-control" placeholder="약통 이름">
                                    </div>
                                </div>
                                <hr>

                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label for="editMediMemo" class="col-form-label">메모&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" id="editMediMemo" class="form-control" placeholder="메모">
                                    </div>
                                </div>
                                <hr>

                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label for="editcaseColor" class="col-form-label" style="padding-right: 1em">약통
                                            색상&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="color" id="editcaseColor" class="form-control" placeholder="색상"
                                               value="#ffa8a8" style="width: 150px;height: 70px">
                                    </div>
                                    <div class="col-auto">
                                    </div>
                                </div>
                                <hr>
                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label class="col-form-label" style="padding-right: 1em">약 추가
                                            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                                    </div>
                                    <div class="col-md-9">
                                        <table class="table border-secondary">
                                            <tbody id="editmediTbody">
                                            <tr>
                                                <td><input type="text" id="editmedi" class="form-control"
                                                           placeholder="무슨약"></td>
                                            </tr>

                                            </tbody>

                                        </table>
                                        <button onclick="editAddRow()" style="background: none;border: none">
                                            <img class="img-fluid" style="width: 30px;height: 30px"
                                                 src="/image/plusbutton.png" alt="..."/>
                                        </button>

                                        <button onclick="editDelRow()" style="background: none;border: none">
                                            <img class="img-fluid" style="width: 30px;height: 30px"
                                                 src="/image/minus.png" alt="..."/>
                                        </button>

                                    </div>
                                    <div class="col-auto">

                                    </div>

                                </div>
                                <hr>

                                <div class="row g-3 align-items-center">
                                    <div class="col-auto">
                                        <label class="col-form-label" style="padding-right: 1em">여분의
                                            약&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" aria-label="Default select example"
                                                id="editDayselect"
                                                onchange="editBellChange(); editCount();">
                                            <option value="0" selected>선택 없음</option>
                                            <option value="1">갯수</option>
                                            <option value="2">일</option>
                                            <option value="3">주</option>
                                            <option value="4">달</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <div id="editD1" style="visibility: hidden">
                                                <span class="stepper">
                                                  <button>–</button>
                                                    <input type="number" id="stepper" value="0" min="0" max="365"
                                                           step="1" onchange="editCount();">
                                                  <button>+</button>
                                                </span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" aria-label="Default select example" id="editD2"
                                                style="visibility: hidden" onchange="editCount()">
                                            <option value="0" selected>하루 몇번</option>
                                            <option value="1">1번</option>
                                            <option value="2">2번</option>
                                            <option value="3">3번</option>
                                        </select>
                                    </div>
                                    <div class="col-auto">
                                    </div>
                                </div>
                            </div>
                            <br>
                            <h4 class="text-dark mb-0" id="editCount" style="display: inline" th:text="0"></h4><h4
                                style="display: inline">개</h4>
                            <br><br><br><br>
                            <button id="btn-edit" class="btn btn-primary" style="width: 90px">
                                수정
                            </button>
                            <button class="btn btn-primary" style="width: 90px" data-bs-dismiss="modal">
                                취소
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- 일정 조회 -->
<div class="modal fade" id="timebtn" tabindex="-1" aria-labelledby="timebtn"
     aria-hidden="true" >
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-10">
                            <!-- 타이틀 -->
                            <h1 class="portfolio-modal-title text-dark text-uppercase mb-0" id="scheduleName" style="font-weight: 800;" >의 약통 일정</h1><br><br>
                            <div>
                            <div class="row g-3 align-items-center" >
                                <input type="hidden" value="" id="hiddenId">
                                <div class="col-md-6" th:each="scheLists: ${scheList}">
                                    <table id="belltable" class="table table-bordered border-secondary"
                                           style="width: 350px; float: left;">
                                        <tbody>
                                        <tr>
                                            <th class="table-active" valign="middle">
                                                <div style="text-align: left">
                                                    <div>
                                                        <i class="fas fa-stopwatch fa-2x"
                                                           style="margin-top: 2px;margin-left: 10px"></i>
                                                        <span style="font-size: 19px; line-height: 2;margin-left: 20px" th:text="${scheLists.getTimeUpdate()}"></span>
                                                    </div>
                                                </div>
                                            </th>
                                        </tr>
                                        <!--ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ-->
                                        <tr style="border-bottom: none">
                                            <th class="table" valign="middle"
                                                style="font-size: 20px;padding: 10px;text-align: left">
                                                <div class="row g-3 align-items-center">
                                                    <div class="col-md-4">
                                                        <label style="font-size: 20px; vertical-align:top;" >
                                                            시작일
                                                        </label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <h4 type="text" id="addTime" th:text="${scheLists.getStartday()}" style="font-size: 18px" ></h4>
                                                    </div>
                                                </div>
                                                <div class="row g-3 align-items-center">
                                                    <div class="col-md-4">
                                                        <label style="font-size: 20px" >
                                                            주기
                                                        </label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <h4 type="text" id="addTime3" style="font-size: 18px" th:text="${scheLists.getCycleUpdate()}"></h4>
                                                    </div>
                                                </div>
                                            </th>
                                        </tr>
                                        <!--ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ-->
                                        <tr style="border-top: none">
                                            <th class="table" valign="middle" style="padding-bottom: 5px;">
                                                <button id="btn-update1" class="btn btn-primary scheduleUpdate" data-bs-toggle="modal"
                                                        data-bs-target="#belleditbtn" th:value="${scheLists.getId()}">
                                                    <i class="fa-solid fa-pen"></i>
                                                    수정
                                                </button>
                                                <button id="btn-delete1" class="btn btn-danger scheduleDelete" th:value="${scheLists.getId()}">
                                                    <i class="fas fa-xmark fa-fw"></i>
                                                    삭제
                                                </button>
                                            </th>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div> <!-- 일정수정 안에 알람 한개 -->
                                <!-- 알람 하나 더 늘리고 싶으면 여기 붙여넣으면됨-->
                            </div>
                            </div>
                        </div> <!-- 모달 창 안 가로 범위 -->

                    </div>

                </div>
            </div>
        </div>
    </div>
</div> <!-- 일정수정 버튼 누르면 나오는 모달 -->

<!-- 이거 다 바꿔야함 -->
<!-- 일정 수정 -->
<div class="portfolio-modal modal fade" id="belleditbtn" tabindex="-1" aria-labelledby="belleditbtn"
     aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close editcanclebtn" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <!-- 타이틀 -->
                            <h1 class="text-dark text-uppercase mb-0" style="font-weight: 600;" >일정 수정하기</h1>

                            <br>
                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="editmedicase" class="col-form-label"
                                           style="padding-right: 5em">약통</label>
                                </div>
                                <div class="col-md-9">
                                    <select class="form-select" aria-label="약통 선택하기" disabled>
                                        <option id="editmedicase"></option>
                                    </select>

                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="editstartday" class="col-form-label"
                                           style="padding-right: 3.6em">시작일&nbsp</label>
                                </div>
                                <div class="col-md-9">
                                    <input type="date" id="editstartday" class="form-control" placeholder="2022-06-24">
                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="editaddTime" class="col-form-label"
                                           style="padding-right: 3em">알람시간</label>
                                </div>
                                <div class="col-md-9">
                                    <input type="time" id="editaddTime" class="form-control">
                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label class="col-form-label" style="padding-right: 5em">주기</label>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" aria-label="Default select example" id="editselectdayBtn2"
                                            onchange="editBellChange2();">
                                        <option value="0" selected>선택 없음</option>
                                        <option value="1">매일</option>
                                        <option value="2">특정 요일</option>
                                        <option value="3">일 간격</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <div id="editBel1" style="visibility: hidden">
                                                <span class="editstepper2">
                                                  <button>–</button>
                                                    <input type="number" id="editstepper2" value="1" min="0" max="365"
                                                           step="1" onchange="editBellCount();">
                                                  <button>+</button>
                                                </span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" aria-label="Default select example" id="editBel2"
                                            style="visibility: hidden">
                                        <option value="0" selected>일에 한번</option>
                                        <option value="1">주에 한번</option>
                                        <option value="2">개월에 한번</option>
                                    </select>
                                </div>
                                <div class="col-auto">
                                </div>
                            </div>
                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                </div>
                                <div class="col-md-7">
                                    <div id="editBel3" style="font-size: 20px; visibility: hidden;">
                                        &nbsp;<input type='checkbox' id='editMon' name='editday' value='0' class="cbox"
                                                     style="accent-color: red;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='editTue' name='editday' value='1' class="cbox"
                                               style="accent-color: #d1721d;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='editWed' name='editday' value='2' class="cbox"
                                               style="accent-color: #9a7928;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='editThu' name='editday' value='3' class="cbox"
                                               style="accent-color: green;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='editFri' name='editday' value='4' class="cbox"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='editSat' name='editday' value='5' class="cbox"
                                               style="accent-color: darkblue;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='editSun' name='editday' value='6' class="cbox"
                                               style="accent-color: purple;"/><br>
                                        &nbsp;월&nbsp;&nbsp;&nbsp;&nbsp;
                                        화&nbsp;&nbsp;&nbsp;&nbsp;
                                        수&nbsp;&nbsp;&nbsp;&nbsp;
                                        목&nbsp;&nbsp;&nbsp;&nbsp;
                                        금&nbsp;&nbsp;&nbsp;&nbsp;
                                        토&nbsp;&nbsp;&nbsp;&nbsp;
                                        일
                                    </div>
                                </div>
                            </div>
                            <br>

                            <br><br><br><br>

                            <button id="editaddbtn" class="btn btn-primary" data-bs-dismiss="modal"
                                    style="width: 90px">
                                수정
                            </button>
                            <button class="btn btn-primary editcanclebtn" data-bs-dismiss="modal" style="width: 90px">
                                취소
                            </button>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- bootstrp js 링크 -->
<script src="/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/mediBox.js"></script>

<script>
    var my_mediTbody = document.getElementById('mediTbody');
    var cnt = 1;

    function addRow() {
        if (cnt < 7) {

            var row = my_mediTbody.insertRow(my_mediTbody.rows.length);
            var cell1 = row.insertCell(0);
            cell1.innerHTML = "<input type=\"text\" id=\"medi" + cnt + "\" class=\"form-control\" placeholder=\"무슨약\">";
            cnt += 1;
        } else {
        }
    }

    function delRow() {
        if (cnt > 1) {
            var row = my_mediTbody.deleteRow(0);
            cnt -= 1;
        }
    }

    var edit_my_mediTbody = document.getElementById('editmediTbody');
    var cnt2 = 1;

    function editAddRow() {
        if (cnt2 < 7) {

            var row2 = edit_my_mediTbody.insertRow(edit_my_mediTbody.rows.length);
            var cell1 = row2.insertCell(0);
            cell1.innerHTML = "<input type=\"text\" id=\"editmedi" + cnt2 + "\" class=\"form-control\" placeholder=\"무슨약\">";
            cnt2 += 1;
        } else {
        }
    }

    function editDelRow() {
        if (cnt2 > 1) {
            var row2 = edit_my_mediTbody.deleteRow(0);
            cnt2 -= 1;
        }
    }

    var i;


    function delbtn() {
        const div = document.getElementById('caseDiv');
        div.remove();
    }

    (function () {
        'use strict';

        function ctrls() {
            var _this = this;
            this.counter = 0;
            this.els = {
                decrement: document.querySelector('.ctrl__button--decrement'),
                counter: {
                    container: document.querySelector('.ctrl__counter'),
                    num: document.querySelector('.ctrl__counter-num'),
                    input: document.querySelector('.ctrl__counter-input')
                },
                increment: document.querySelector('.ctrl__button--increment')
            };
            this.decrement = function () {
                var counter = _this.getCounter();
                var nextCounter = (_this.counter > 0) ? --counter : counter;
                _this.setCounter(nextCounter);
            };
            this.increment = function () {
                var counter = _this.getCounter();
                var nextCounter = (counter < 9999999999) ? ++counter : counter;
                _this.setCounter(nextCounter);
            };
            this.getCounter = function () {
                return _this.counter;
            };
            this.setCounter = function (nextCounter) {
                _this.counter = nextCounter;
            };
            this.debounce = function (callback) {
                setTimeout(callback, 100);
            };
            this.render = function (hideClassName, visibleClassName) {
                _this.els.counter.num.classList.add(hideClassName);
                setTimeout(function () {
                    Count();
                    _this.els.counter.num.innerText = _this.getCounter();
                    _this.els.counter.input.value = _this.getCounter();
                    _this.els.counter.num.classList.add(visibleClassName);
                }, 100);
                setTimeout(function () {
                    Count();
                    _this.els.counter.num.classList.remove(hideClassName);
                    _this.els.counter.num.classList.remove(visibleClassName);
                }, 200);
            };
            this.ready = function () {
                _this.els.decrement.addEventListener('click', function () {
                    _this.debounce(function () {
                        _this.decrement();
                        _this.render('is-decrement-hide', 'is-decrement-visible');
                    });
                });
                _this.els.increment.addEventListener('click', function () {
                    _this.debounce(function () {
                        _this.increment();
                        _this.render('is-increment-hide', 'is-increment-visible');
                    });
                });
                _this.els.counter.input.addEventListener('input', function (e) {
                    var parseValue = parseInt(e.target.value);
                    if (!isNaN(parseValue) && parseValue >= 0) {
                        _this.setCounter(parseValue);
                        _this.render();
                    }
                });
                _this.els.counter.input.addEventListener('focus', function (e) {
                    _this.els.counter.container.classList.add('is-input');
                });
                _this.els.counter.input.addEventListener('blur', function (e) {
                    _this.els.counter.container.classList.remove('is-input');
                    _this.render();
                    Count();
                    editCount();
                });
            };
        };
        // init
        var controls = new ctrls();
        document.addEventListener('DOMContentLoaded', controls.ready);
    })();


    // 추가
    function Change() {
        var key = $('#dayselect').val();
        if (key == 0) {
            document.all["d1"].style.visibility = "hidden";
            document.all["d2"].style.visibility = "hidden";
        } else if (key == 1) {
            document.all["d1"].style.visibility = "visible";
            document.all["d2"].style.visibility = "hidden";
        } else {
            document.all["d1"].style.visibility = "visible";
            document.all["d2"].style.visibility = "visible";
        }
    }

    function Count() {
        var dayselect = $('#dayselect').val();
        var daycount = $('#d2').val();
        var count = $('#mediCount').val();

        var result = 0;

        // 갯수
        if (dayselect == 1) {
            result = count
        }
        // 일
        else if (dayselect == 2) {
            result = count * daycount;
        }
        // 주(7일)
        else if (dayselect == 3) {
            result = 7 * count * daycount;
        }
        // 월(30일)
        else if (dayselect == 4) {
            result = 30 * count * daycount;
        }
        console.log(result)
        $('#count').text(result);
    }

    var inc = document.getElementsByClassName("stepper");
    for (i = 0; i < inc.length; i++) {
        var incI = inc[i].querySelector("input"),
            id = incI.getAttribute("id"),
            min = incI.getAttribute("min"),
            max = incI.getAttribute("max"),
            step = incI.getAttribute("step");
        document
            .getElementById(id)
            .previousElementSibling.setAttribute(
            "onclick",
            "stepperInput('" + id + "', -" + step + ", " + min + ")",
        );
        document
            .getElementById(id)
            .nextElementSibling.setAttribute(
            "onclick",
            "stepperInput('" + id + "', " + step + ", " + max + ")",
        );
    }

    function stepperInput(id, s, m) {
        var el = document.getElementById(id);
        if (s > 0) {
            if (parseInt(el.value) < m) {
                el.value = parseInt(el.value) + s;
            }
        } else {
            if (parseInt(el.value) > m) {
                el.value = parseInt(el.value) + s;
            }
        }
        editCount();
    }


    // 수정
    function editBellChange() {
        var key = $('#editDayselect').val();
        console.log(key);
        if (key == 0) {
            document.all["editD1"].style.visibility = "hidden";
            document.all["editD2"].style.visibility = "hidden";
        } else if (key == 1) {
            document.all["editD1"].style.visibility = "visible";
            document.all["editD2"].style.visibility = "hidden";
        } else {
            document.all["editD1"].style.visibility = "visible";
            document.all["editD2"].style.visibility = "visible";
        }
    }

    function editCount() {
        var dayselect = $('#editDayselect').val();
        var daycount = $('#editD2').val();
        var count = $('#stepper').val();

        var result = 0;

        // 갯수
        if (dayselect == 0) {
            // result = count
        }
        // 갯수
        else if (dayselect == 1) {
            result = count
        }
        // 일
        else if (dayselect == 2) {
            result = count * daycount;
        }
        // 주(7일)
        else if (dayselect == 3) {
            result = 7 * count * daycount;
        }
        // 월(30일)
        else if (dayselect == 4) {
            result = 30 * count * daycount;
        }
        console.log(result)
        $('#editCount').text(result);
    }
    function editBellChange2() {
        var key2 = $('#editselectdayBtn2').val();
        if (key2 == 0) {
            document.all["editBel1"].style.visibility = "hidden";
            document.all["editBel2"].style.visibility = "hidden";
            document.all["editBel3"].style.visibility = "hidden";
        } else if (key2 == 1) {
            document.all["editBel1"].style.visibility = "hidden";
            document.all["editBel2"].style.visibility = "hidden";
            document.all["editBel3"].style.visibility = "hidden";
        } else if (key2 == 2) {
            document.all["editBel1"].style.visibility = "hidden";
            document.all["editBel2"].style.visibility = "hidden";
            document.all["editBel3"].style.visibility = "visible";
        } else {
            document.all["editBel1"].style.visibility = "visible";
            document.all["editBel2"].style.visibility = "visible";
            document.all["editBel3"].style.visibility = "hidden";
        }
    }
    var inc = document.getElementsByClassName("editstepper2");
    for (i = 0; i < inc.length; i++) {
        var incI = inc[i].querySelector("input"),
            id = incI.getAttribute("id"),
            min = incI.getAttribute("min"),
            max = incI.getAttribute("max"),
            step = incI.getAttribute("step");
        document
            .getElementById(id)
            .previousElementSibling.setAttribute(
            "onclick",
            "stepperInput('" + id + "', -" + step + ", " + min + ")"
        );
        document
            .getElementById(id)
            .nextElementSibling.setAttribute(
            "onclick",
            "stepperInput('" + id + "', " + step + ", " + max + ")"
        );
    }
</script>


</body>
</html>