<!DOCTYPE html>
<!-- 타임리프 사용 -->
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>myPage</title>
    <!-- bootstrap, custom css 링크 -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/home.css" rel="stylesheet">
</head>
<body>
<div th:replace="navbar/navBar :: navBar"/>
<p class="myPageText">MY PAGE</p>

<div class="myPage">
    <hr class="myPageHr">
    <p class="myPageHead">&nbsp&nbsp개인정보</p>
    <div class="myPageIndiv">
        <br>

        <div class="row g-3 align-items-center">
            <br>
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="emailText" class="col-form-label">이메일</label>
                </div>
                <div class="col-md-9">
                    <input type="text" id="emailText" class="form-control" placeholder="test2@naver.com"
                           th:value="${member.getEmail()}" disabled>
                </div>
            </div>
            <br>

            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label class="col-form-label">닉네임</label>
                </div>
                <div class="col-md-9">
                    <input type="text" id="nameText" class="form-control" placeholder="닉네임"
                           th:value="${member.getNickname()}">
                </div>
            </div>

            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="callText" class="col-form-label">연락처</label>
                </div>
                <div class="col-md-9">
                    <input type="text" id="callText" class="form-control" placeholder="010-1234-5678"
                           th:value="${member.getPhone()}">
                </div>
            </div>
            <br>

            <div class="row g-3 align-items-center">
                <div class="col-auto">
                <span>
                    <button id="btn-update" type="button" class="btn btn-primary">변경</button>
                </span>
                </div>
            </div>
        </div>
    </div>
    <hr class="myPageHr">
    <p class="myPageHead">&nbsp&nbsp 패스워드 변경</p>
    <br>
    <div class="myPageIndiv2">
        <div class="row g-3 align-items-center">
            <div class="col-auto">
                <label for="nowPass" class="col-form-label" style="padding-right: 3em">패스워드&nbsp</label>
            </div>
            <div class="col-md-9">
                <input type="password" id="nowPass" name="nowPass" class="form-control" placeholder="현재 비밀번호">
            </div>
        </div>
        <br>

        <div class="row g-3 align-items-center">
            <div class="col-auto">
                <label for="newPass" class="col-form-label">변경할 패스워드</label>
            </div>
            <div class="col-md-9">
                <input type="password" id="newPass" name="newPass" class="form-control" placeholder="새 비밀번호">
            </div>
        </div>
        <br>

        <div class="row g-3 align-items-center">
            <div class="col-auto">
                <label for="rePass" class="col-form-label" style="padding-right: 1em">패스워드 확인</label>
            </div>
            <div class="col-md-9">
                <input type="password" id="rePass" name="rePass" class="form-control" placeholder="비밀번호 확인">
            </div>
            <div class="col-auto">
                <span>
                    <button id="btn-update-password" type="button" class="btn btn-primary">변경</button>
                </span>
            </div>
        </div>
    </div>
    <br>
    <hr class="myPageHr">
    <p class="myPageHead">&nbsp&nbsp친구 설정</p>
    <div class="myPageBox">
        <div class="text-center">
            <button type="button" class="myPageBtnImage " id="img_btn" data-bs-target="#connect" data-bs-toggle="modal" >
                <img class="myPagebtnImage2" src="/image/plusbutton.png">
            </button>
        </div>
    </div>

    <hr class="myPageHr">
    <p class="myPageHead">&nbsp&nbsp알림 설정</p>
    <br>
    <div class="myPageIndiv3">
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="vibrationCheckbox"
                   th:field="*{member.vibration}">
            <label class="form-check-label" for="vibrationCheckbox" style="font-weight:bolder">진동 모드</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="pushAlarmCheckbox"
                   th:field="*{member.pushAlarms}">
            <label class="form-check-label" for="pushAlarmCheckbox" style="font-weight:bolder">푸쉬 알림</label>
        </div>
        <div class=" form-check form-switch">
            <input class="form-check-input " type="checkbox" role="switch" id="locationAlarmsCheckbox"
                   th:field="*{member.locationAlarms}">
            <label class="form-check-label " for="locationAlarmsCheckbox" style="font-weight:bolder">위치 알림</label>
        </div>
        <div class=" form-check form-switch">
            <input class="form-check-input " type="checkbox" role="switch" id="replenishAlarmsCheckbox"
                   th:field="*{member.replenishAlarms}">
            <label class="form-check-label" for="replenishAlarmsCheckbox" style="font-weight:bolder">보충 약 알림</label>
        </div>
        <div class=" form-check form-switch">
            <input class="form-check-input " type="checkbox" role="switch" id="s4_1" th:checked="${member.getWorkAlarms != null}" onclick="isChecked()">

            <label class="form-check-label " for="s4_1" style="font-weight:bolder">출근 시 알림</label>
        </div>
        <div id="workTimeDiv" style="text-align: right; display: none" class="row g-3">
            <div class="col-md-4" style="padding-left: 0px">
                <label for="workTime" class="col-form-label" style="padding-right: 3em">└ 출근 시간</label>
            </div>
            <div class="col-md-6">
                <input type="time" id="workTime" class="form-control"  th:value="${#temporals.format(member.getWorkAlarms(), 'hh:mm')}">
            </div>
        </div>
    </div>

    <div class="myPageIndiv4">
        <div class="d-grid gap-2 col-6 mx-auto">
            <button type="button" class="btn btn-primary btn-lg" id="liveToastBtn">저장하기</button>

            <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
                <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <img src="/image/testBtn1.png" class="rounded me-2" alt="...">
                        <strong class="me-auto myPageToastText">약 쏙</strong>
                        <small class="myPageToastText">1 sec ago</small>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body myPageToastText">
                        정상적으로 정보가 저장됐습니다.<br>
                        3초후 자동 이동합니다.
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

<!-- 친구 추가 -->
<div class="portfolio-modal modal fade" id="connect" tabindex="-1" aria-labelledby="connect"
     aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <!-- 타이틀 -->
                            <h1 class="text-dark text-uppercase mb-0">친구 연동</h1>
                            <br>
                            <h5>함께 연동할 다른 사용자를 등록하시려면 프로필을 추가하세요.</h5>
                            <br>
                            <form id="form" name="form" method="post" target="iframe1" class="row g-3 align-items-center needs-validation" novalidate>
                                <div class="col-auto">
                                    <label for="connectEmail" class="col-form-label" style="padding-right: 3em">친구 이메일</label>
                                </div>
                                <div class="col-md-7">
                                    <input type="email" id="connectEmail" class="form-control" placeholder="이메일">
                                </div>
                                <div class="row g-3 invalid-feedback">
                                    Please choose a username.
                                </div>
                                <div class="col-md-2">
                                    <button type="submit">요청 보내기</button>
                                </div>
                            </form>
                            <hr>
                            <div class="row g-3 align-items-center">
                                <div class="col-auto">
                                    <label for="connectName" class="col-form-label" style="padding-right: 3em">친구 닉네임</label>
                                </div>
                                <div class="col-md-7">
                                    <input type="text" id="connectName" class="form-control" placeholder="친구 닉네임">
                                </div>
                                <div class="col-md-2">

                                </div>
                            </div>
                        </div>


                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<iframe id="iframe1" name="iframe1" style="display:none"></iframe>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/member.js"></script>
<!-- bootstrp js 링크 -->
<script src="/js/bootstrap.min.js"></script>

<script>
    function isChecked() {
        if ($('#s4_1').is(":checked")) {
            $('#workTimeDiv').show();
        } else {
            $('#workTimeDiv').hide();
        }
    }
    window.onload = isChecked();

    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    })()
</script>
</body>
</html>