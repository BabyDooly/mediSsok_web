<!DOCTYPE html>

<!-- 타임리프 사용 -->
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>myPage</title>
    <!-- bootstrap, custom css 링크 -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/home.css" rel="stylesheet">

    <!-- Custom fonts for this template-->
    <!-- fontawesome-free 파일 설치해서 넣었는데 적용안됨, 그래서 직접 링크함-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"/>

    <style type="text/css">
        .btn {

            display: inline-block;
            padding: 10px;
            position: relative;
            text-align: center;
            transition: background 600ms ease, color 600ms ease;
        }

        input[type=radio].toggle {
            display: none;
        }

        input[type=radio].toggle + label {
            cursor: pointer;
            text-align: center;
            width: 197px;
        }

        input[type=radio].toggle + label:hover {
            background: none;
            color: #000000;
        }

        input[type=radio].toggle + label:after {
            background: #6F6FFF;
            content: "";
            height: 100%;
            position: absolute;
            top: 0;
            transition: left 200ms cubic-bezier(0.77, 0, 0.175, 1);
            width: 100%;
            z-index: -1;
        }

        input[type=radio].toggle.toggle-left + label {
            border-right: 0;
        }

        input[type=radio].toggle.toggle-left + label:after {
            left: 100%;
        }

        input[type=radio].toggle.toggle-right + label {
            margin-left: -5px;
        }

        input[type=radio].toggle.toggle-right + label:after {
            left: -100%;
        }

        input[type=radio].toggle:checked + label {
            cursor: default;
            color: #fff;
            transition: color 200ms;
        }

        input[type=radio].toggle:checked + label:after {
            left: 0;
        }

    </style>

</head>

<body>
<div th:replace="navbar/navBar :: navBar"/>
<p class="mainText" th:text="${member} + '님의 오늘 알람'"></p>
<p class="mainSubText">오늘도 잊지말고 꼭 드셔주세요.</p>
<div style="text-align: center">
    <button type="button" onclick="plusbtn" class="btn btn-secondary" style="width: 300px;height: 60px">
        <div>
            <div data-bs-toggle="modal" data-bs-target="#plusbtn" id="schedulePlus">
                <i class="fas fa-plus fa-2x"></i>
            </div>
        </div>
    </button>
</div>

<br>

<div class="mediSearchDiv">
    <table id="belltable" class="table table-bordered border-secondary" style="width: 401px;float: left;">
        <tbody>
        <tr>
            <th class="table-active" valign="middle">
                <div>
                    <div>
                        <i class="fas fa-stopwatch fa-aw fa-2x"
                           style="position: absolute;line-height: 1.6;margin-left: 10px"></i>
                    </div>
                    <div>
                        <span style="font-size: 20px; position: absolute;line-height: 2.5;margin-left: 50px">아침 식후 30분</span>
                    </div>
                    <div style="text-align: right">
                        <button style="background: none;border: none;width: 40px" onclick="bellbtn()">
                            <i id="img1" class="fas fa-bell fa-aw fa-2x" style="line-height: 1.6"></i>
                        </button>
                        <button style="border: none; background: #e5e5e5;width: 40px" onclick="belleditbtn">
                            <div data-bs-toggle="modal" data-bs-target="#belleditbtn">
                                <i class="fas fa-edit fa-aw fa-2x" style="line-height: 1.6"></i>
                            </div>
                        </button>
                        <button style="border: none;background: #e5e5e5;width: 40px" onclick="delBellbtn()">
                            <i class="fas fa-times fa-aw fa-2x" style="line-height: 1.6"></i>
                        </button>
                    </div>
                </div>
            </th>
        </tr>
        <!--ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ-->
        <tr>
            <th class="table" valign="middle" style="height: 100px;font-size: 20px;padding: 10px">
                감기약<br>혈압약
            </th>
        </tr>
        <!--ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ-->
        <tr>
            <th class="table-active" valign="middle" style="padding: 0px">
                <input id="toggle-on1" class="toggle toggle-left" name="toggle1" value="false" type="radio" checked>
                <label for="toggle-on1" class="btn">안 먹었어요</label>
                <input id="toggle-off1" class="toggle toggle-right" name="toggle1" value="true" type="radio">
                <label for="toggle-off1" class="btn">먹었어요</label>
            </th>
        </tr>
        </tbody>
    </table>
</div>



</div>

<!-- 알람 추가 -->
<div class="portfolio-modal modal fade" id="plusbtn" tabindex="-1" aria-labelledby="plusbtn"
     aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <!-- 타이틀 -->
                            <h1 class="text-dark text-uppercase mb-0">알람 추가하기</h1>

                            <br>
                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="medicase" class="col-form-label"
                                           style="padding-right: 3em">약통선택</label>
                                </div>
                                <div class="col-md-9">
                                    <select id="medicase" class="form-select" aria-label="약통 선택하기">
                                        <option selected value="0">약통 선택하기</option>
                                        <option th:each="med : ${mediBoxs}" th:value="${med.getId()}"
                                        th:text="${med.getName()}">감기약</option>
                                    </select>

                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="startday" class="col-form-label"
                                           style="padding-right: 3.6em">시작일&nbsp</label>
                                </div>
                                <div class="col-md-9">
                                    <input type="date" id="startday" class="form-control" placeholder="2022-06-24">
                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="addTime" class="col-form-label"
                                           style="padding-right: 3em">알람시간</label>
                                </div>
                                <div class="col-md-9">
                                    <input type="time" id="addTime" class="form-control">
                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label class="col-form-label" style="padding-right: 5em">주기</label>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" aria-label="Default select example" id="selectdayBtn"
                                            onchange="Change2();">
                                        <option value="0" selected>선택 없음</option>
                                        <option value="1">매일</option>
                                        <option value="2">특정 요일</option>
                                        <option value="3">일 간격</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <div id="sel1" style="visibility: hidden">
                                                <span class="stepper2">
                                                  <button>–</button>
                                                    <input type="number" id="stepper" value="1" min="0" max="365"
                                                           step="1" onchange="editCount2();">
                                                  <button>+</button>
                                                </span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" aria-label="Default select example" id="sel2"
                                            style="visibility: hidden">
                                        <option value="0" selected>일에 한번</option>
                                        <option value="1">주에 한번</option>
                                        <option value="2">개월에 한번</option>
                                    </select>
                                </div>
                                <div class="col-auto">
                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                </div>
                                <div class="col-md-7">
                                    <div id="sel3" style="font-size: 20px; visibility: hidden;">
                                        &nbsp;<input type='checkbox' id='addMon' value='0' class="cbox"
                                                     style="accent-color: red;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='addTue' value='1' class="cbox"
                                               style="accent-color: #d1721d;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='addWed' value='2' class="cbox"
                                               style="accent-color: #9a7928;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='addThu' value='3' class="cbox"
                                               style="accent-color: green;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='addFri' value='4' class="cbox"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='addSat' value='5' class="cbox"
                                               style="accent-color: darkblue;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' id='addSun' value='6' class="cbox"
                                               style="accent-color: purple;"/><br>
                                        &nbsp;월&nbsp;&nbsp;&nbsp;&nbsp;
                                        화&nbsp;&nbsp;&nbsp;&nbsp;
                                        수&nbsp;&nbsp;&nbsp;&nbsp;
                                        목&nbsp;&nbsp;&nbsp;&nbsp;
                                        금&nbsp;&nbsp;&nbsp;&nbsp;
                                        토&nbsp;&nbsp;&nbsp;&nbsp;
                                        일
                                    </div>
                                </div>
                            </div>
                            <br><br><br>


                            <button id="addbtn" class="btn btn-primary" data-bs-dismiss="modal" style="width: 90px">
                                추가
                            </button>
                            <button class="btn btn-primary" data-bs-dismiss="modal" style="width: 90px">
                                취소
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 알람 수정 -->
<div class="portfolio-modal modal fade" id="belleditbtn" tabindex="-1" aria-labelledby="belleditbtn"
     aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <!-- 타이틀 -->
                            <h1 class="text-dark text-uppercase mb-0">알람 수정하기</h1>

                            <br>
                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="editmedicase" class="col-form-label"
                                           style="padding-right: 3em">약통선택</label>
                                </div>
                                <div class="col-md-9">
                                    <select id="editmedicase" class="form-select" aria-label="약통 선택하기">
                                        <option selected value="">약통 선택하기</option>
                                        <option value="감기약">감기약</option>
                                        <option value="혈압약">혈압약</option>
                                        <option value="두통약">두통약</option>
                                    </select>

                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="editstartday" class="col-form-label"
                                           style="padding-right: 3.6em">시작일&nbsp</label>
                                </div>
                                <div class="col-md-9">
                                    <input type="date" id="editstartday" class="form-control" placeholder="2022-06-24">
                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label for="editaddTime" class="col-form-label"
                                           style="padding-right: 3em">알람시간</label>
                                </div>
                                <div class="col-md-9">
                                    <input type="time" id="editaddTime" class="form-control">
                                </div>
                            </div>
                            <br>

                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                    <label class="col-form-label" style="padding-right: 5em">주기</label>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" aria-label="Default select example" id="editselectdayBtn"
                                            onchange="editBellChange();">
                                        <option value="0" selected>선택 없음</option>
                                        <option value="1">매일</option>
                                        <option value="2">특정 요일</option>
                                        <option value="3">일 간격</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <div id="editsel1" style="visibility: hidden">
                                                <span class="editstepper">
                                                  <button>–</button>
                                                    <input type="number" id="editstepper" value="0" min="0" max="365"
                                                           step="1" onchange="editBellCount();">
                                                  <button>+</button>
                                                </span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" aria-label="Default select example" id="editsel2"
                                            style="visibility: hidden">
                                        <option value="0" selected>일 간격</option>
                                        <option value="1">1번</option>
                                        <option value="2">2번</option>
                                        <option value="3">3번</option>
                                    </select>
                                </div>
                                <div class="col-auto">
                                </div>
                            </div>
                            <div class="row g-3 align-items-center">
                                <div class="col-md-3">
                                </div>
                                <div class="col-md-7">
                                    <div id="editsel3" style="font-size: 20px; visibility: hidden;">
                                        &nbsp;<input type='checkbox' name='editday' value='0' class="cbox"
                                                     style="accent-color: red;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' name='editday' value='1' class="cbox"
                                               style="accent-color: #d1721d;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' name='editday' value='2' class="cbox"
                                               style="accent-color: #9a7928;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' name='editday' value='3' class="cbox"
                                               style="accent-color: green;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' name='editday' value='4' class="cbox"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' name='editday' value='5' class="cbox"
                                               style="accent-color: darkblue;"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type='checkbox' name='editday' value='6' class="cbox"
                                               style="accent-color: purple;"/><br>
                                        &nbsp;월&nbsp;&nbsp;&nbsp;&nbsp;
                                        화&nbsp;&nbsp;&nbsp;&nbsp;
                                        수&nbsp;&nbsp;&nbsp;&nbsp;
                                        목&nbsp;&nbsp;&nbsp;&nbsp;
                                        금&nbsp;&nbsp;&nbsp;&nbsp;
                                        토&nbsp;&nbsp;&nbsp;&nbsp;
                                        일
                                    </div>
                                </div>
                            </div>
                            <br>

                            <br><br><br><br>

                            <button id="editaddbtn" onclick="editaddbtn()" class="btn btn-primary" data-bs-dismiss="modal"
                                    style="width: 90px">
                                수정
                            </button>
                            <button class="btn btn-primary" data-bs-dismiss="modal" style="width: 90px">
                                취소
                            </button>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- bootstrp js 링크 -->
<script src="/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/schedule.js"></script>

<script>
    function updateDiv() {
        window.location.reload();
    }

    var count = 1;

    function bellbtn() {
        var img1 = document.getElementById("img1");
        if (count % 2 == 1) {
            img1.classList.replace('fas','far');
        } else {
            img1.classList.replace('far','fas');
        }
        count++;
    }

    function delbtn() {
        const div = document.getElementById('divv');
        div.remove();
    }

    function Change2() {
        var key2 = $('#selectdayBtn').val();
        if (key2 == 0) {
            document.all["sel1"].style.visibility = "hidden";
            document.all["sel2"].style.visibility = "hidden";
            document.all["sel2"].style.visibility = "hidden";
        } else if (key2 == 1) {
            document.all["sel1"].style.visibility = "hidden";
            document.all["sel2"].style.visibility = "hidden";
            document.all["sel3"].style.visibility = "hidden";
        } else if (key2 == 2) {
            document.all["sel1"].style.visibility = "hidden";
            document.all["sel2"].style.visibility = "hidden";
            document.all["sel3"].style.visibility = "visible";
        } else {
            document.all["sel1"].style.visibility = "visible";
            document.all["sel2"].style.visibility = "visible";
            document.all["sel3"].style.visibility = "hidden";
        }
    }

    var inc = document.getElementsByClassName("stepper2");
    for (i = 0; i < inc.length; i++) {
        var incI = inc[i].querySelector("input"),
            id = incI.getAttribute("id"),
            min = incI.getAttribute("min"),
            max = incI.getAttribute("max"),
            step = incI.getAttribute("step");
        document
            .getElementById(id)
            .previousElementSibling.setAttribute(
            "onclick",
            "stepperInput('" + id + "', -" + step + ", " + min + ")"
        );
        document
            .getElementById(id)
            .nextElementSibling.setAttribute(
            "onclick",
            "stepperInput('" + id + "', " + step + ", " + max + ")"
        );
    }

    function stepperInput(id, s, m) {
        var el = document.getElementById(id);
        if (s > 0) {
            if (parseInt(el.value) < m) {
                el.value = parseInt(el.value) + s;
            }
        } else {
            if (parseInt(el.value) > m) {
                el.value = parseInt(el.value) + s;
            }
        }
    }
    function delBellbtn(){
        if(confirm("정말 삭제 하시겠습니까?")==true) {
            alert("삭제되었습니다.")
        }else{
            alert("취소되었습니다.")
        }
    }

    function editBellChange() {
        var key2 = $('#editselectdayBtn').val();
        if (key2 == 0) {
            document.all["editsel1"].style.visibility = "hidden";
            document.all["editsel2"].style.visibility = "hidden";
            document.all["editsel3"].style.visibility = "hidden";
        } else if (key2 == 1) {
            document.all["editsel1"].style.visibility = "hidden";
            document.all["editsel2"].style.visibility = "hidden";
            document.all["editsel3"].style.visibility = "hidden";
        } else if (key2 == 2) {
            document.all["editsel1"].style.visibility = "hidden";
            document.all["editsel2"].style.visibility = "hidden";
            document.all["editsel3"].style.visibility = "visible";
        } else {
            document.all["editsel1"].style.visibility = "visible";
            document.all["editsel2"].style.visibility = "visible";
            document.all["editsel3"].style.visibility = "hidden";
        }
    }
    var inc = document.getElementsByClassName("editstepper");
    for (i = 0; i < inc.length; i++) {
        var incI = inc[i].querySelector("input"),
            id = incI.getAttribute("id"),
            min = incI.getAttribute("min"),
            max = incI.getAttribute("max"),
            step = incI.getAttribute("step");
        document
            .getElementById(id)
            .previousElementSibling.setAttribute(
            "onclick",
            "stepperInput('" + id + "', -" + step + ", " + min + ")"
        );
        document
            .getElementById(id)
            .nextElementSibling.setAttribute(
            "onclick",
            "stepperInput('" + id + "', " + step + ", " + max + ")"
        );
    }
</script>
</body>
</html>